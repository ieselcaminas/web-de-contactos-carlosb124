<?php

namespace App\Controller;



use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;

use Symfony\Component\Routing\Annotation\Route;

use Symfony\Bridge\Doctrine\Security\User\UserLoaderInterface;

class SecurityController extends AbstractController

{



    #[Route('/logout', name: 'app_logout', methods:["GET"])]

    public function logout(): void

    {

        // controller can be blank: it will never be called!

        throw new \Exception('Don\'t forget to activate logout in security.yaml');

    }
    public function loadUserByIdentifier(string $usernameOrEmail): ?User
    {
        $entityManager = $this->getManager();
        return $entityManager->createQuery(
            'SELECT u
                FROM App\Entity\User u
                WHERE u.email = :query
                OR u.username = :query' 
        )
            ->setParameter('query', $usernameOrEmail)
            ->getOneOrNullResult();
        }
    }


